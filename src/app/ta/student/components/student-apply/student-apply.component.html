<h3 nz-typography class="mt-2">已经申请: <span>{{requestList!.length}}</span></h3>
<h3 nz-typography class="mt-2">还能申请: <span>{{currentStudentInfo.maxReq}}</span></h3>

<h3 nz-typography class="mt-2">已提交申请</h3>
<nz-table #currentRequestInTable [nzPageSize]="20" nzShowQuickJumper [nzData]='requestList!'>
  <thead>
    <tr>
      <th nzCustomFilter>课程代码
        <nz-filter-trigger [(nzVisible)]="visibleSearchCode" [nzActive]="searchCodeValue.length > 0"
          [nzDropdownMenu]="searchCodeMenu">
          <i nz-icon nzType="filter" nzTheme="twotone"></i>
        </nz-filter-trigger>
      </th>
      <th nzCustomFilter>课程名称
        <nz-filter-trigger [(nzVisible)]="visibleSearchTitle" [nzActive]="searchTitleValue.length > 0"
          [nzDropdownMenu]="searchTitleMenu">
          <i nz-icon nzType="filter" nzTheme="twotone"></i>
        </nz-filter-trigger>
      </th>
      <th>老师</th>
      <th>申请进程</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of currentRequestInTable.data">
      <td>{{ data.Lesson.code }}</td>
      <td>{{ data.Lesson.title }}</td>
      <td>{{ filiterTeacherName(data.Lesson.Teachers) }}</td>
      <td>{{ data.pass&&data.validated?"成功":"申请中" }}</td>
      <td>
        <a nz-button nzType="link" nz-popconfirm nzPopconfirmTitle="确定要撤销申请课程 {{data.title}} 吗?"
          nzPopconfirmPlacement="bottom" (nzOnConfirm)="CancelRequestConfirm(data.Lesson)" (nzOnCancel)="Cancel()"
          nzOkText="确认撤销申请" nzCancelText="取消">撤销申请课程</a>
        <nz-divider nzType="vertical"></nz-divider>
        <a *ngIf="data.pass&&data.validated" nz-button nzType="link" (click)="showModalShowAgreement(data)">填写助教工作协议</a>
      </td>
    </tr>
  </tbody>
</nz-table>

<!-- 课程名的搜索的下拉框 -->
<nz-dropdown-menu #searchTitleMenu="nzDropdownMenu">
  <div class="ant-table-filter-dropdown">
    <div>
      <input type="text" nz-input placeholder="按课程名搜索" [(ngModel)]="searchTitleValue" />
      <button nz-button nzSize="small" nzType="primary" (click)="searchTitle()" class="search-button">
        搜索
      </button>
      <button nz-button nzSize="small" (click)="resetTitle()">取消</button>
    </div>
  </div>
</nz-dropdown-menu>

<!-- code的搜索的下拉框 -->
<nz-dropdown-menu #searchCodeMenu="nzDropdownMenu">
  <div class="ant-table-filter-dropdown">
    <div>
      <input type="text" nz-input placeholder="按课程代码搜索" [(ngModel)]="searchCodeValue" />
      <button nz-button nzSize="small" nzType="primary" (click)="searchCode()" class="search-button">
        搜索
      </button>
      <button nz-button nzSize="small" (click)="resetCode()">取消</button>
    </div>
  </div>
</nz-dropdown-menu>

<!-- 查看课程信息的对话框 -->
<nz-modal [nzStyle]="{ width: '80%' }" [(nzVisible)]="isVisibleShowAgreement" nzTitle="助教工作协议"
  (nzOnOk)="handleOkShowAgreement()" (nzOnCancel)="handleOkShowAgreement()" [nzOkLoading]="isOkLoadingShowAgreement">
  <ng-container *nzModalContent>

  </ng-container>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="handleCancelShowAgreement()">取消</button>
    <button nz-button nzType="primary" (click)="handleOkShowAgreement()">提交助教工作协议</button>
  </div>
</nz-modal>
